<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>PostMessage를 보내는 쪽</title>

    <script src="main.js"></script>

    <script>
        var childwin;
        const childname = "popup";

        function openChild() {
            childwin = window.open('page2.html', childname, 'height=300px, width=500px');
        }

        function sendMessage() {
            let msg = {
                pName: "Bob",
                pAge: "35"
            };
            childwin.postMessage(msg, '*');
            childwin.focus();
        }

        function send2SW(){
            let msg = {
                command: "print",
                sentence: "Hello Service Worker!"
            };
            // client.postMessage(msg, '*');
            navigator.serviceWorker.postMessage(msg, '*');
        }
    </script>
</head>

<body>
    <h1>postMessage Test</h1>
    <h3> Done by Yeomin J </h3>

    <form>
        <fieldset>
            <input type="button" id='btnopen' value="Open child" onclick="openChild();">
            <input type="button" id='btnSendMsg' value="Send Message" onclick="sendMessage(); send2SW();">

        </fieldset>
    </form>

</body>

</html>